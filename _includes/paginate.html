<div class="paginate-container">
    {% if paginator.total_pages > 0 %}
    <div class="pagination">
        {% if paginator.previous_page %}
        <a href="{{ paginator.previous_page_path | prepend: site.baseurl | replace: '//', '/' }}">Previous</a>
        {% else %}
        <span class="disabled">Previous</span>
        {% endif %}

        {% assign start_index = paginator.page | minus:2 %}
        {% if start_index < 1 %}
        {% assign start_index = 1 %}
        {% endif %}

        {% assign end_index = paginator.page | plus:2 %}
        {% if end_index > paginator.total_pages %}
        {% assign end_index = paginator.total_pages %}
        {% endif %}

        {% if start_index > 1 %}
        {% for page in (1..1) %}
        <a href="{{ site.baseurl }}/">{{ page }}</a>
        {% endfor %}
        {% endif %}

        {% if start_index > 2 %}
        {% for page in (2..2) %}
        <a href="{{ site.paginate_path | prepend: site.baseurl | replace: '//', '/' | replace: ':num', page }}">{{ page }}</a>
        {% endfor %}
        {% endif %}

        {% if start_index > 3 %}
        <span class="gap">…</span>
        {% endif %}

        {% for page in (start_index..end_index) %}
        {% if page == paginator.page %}
        <em class="current">{{ page }}</em>
        {% elsif page == 1 %}
        <a href="{{ site.baseurl }}/">{{ page }}</a>
        {% else %}
        <a href="{{ site.paginate_path | prepend: site.baseurl | replace: '//', '/' | replace: ':num', page }}">{{ page }}</a>
        {% endif %}
        {% endfor %}

        {% assign last_end_index2 = paginator.total_pages | minus:2 %}
        {% if end_index < last_end_index2 %}
        <span class="gap">…</span>
        {% endif %}

        {% assign last_end_index1 = paginator.total_pages | minus:1 %}
        {% if end_index < last_end_index1 %}
        {% for page in (last_end_index1..last_end_index1) %}
        <a href="{{ site.paginate_path | prepend: site.baseurl | replace: '//', '/' | replace: ':num', page }}">{{ page }}</a>
        {% endfor %}
        {% endif %}

        {% if end_index < paginator.total_pages %}
        {% for page in (paginator.total_pages..paginator.total_pages) %}
        <a href="{{ site.paginate_path | prepend: site.baseurl | replace: '//', '/' | replace: ':num', page }}">{{ page }}</a>
        {% endfor %}
        {% endif %}

        {% if paginator.next_page %}
        <a href="{{ paginator.next_page_path | prepend: site.baseurl | replace: '//', '/' }}">Next</a>
        {% else %}
        <span class="disabled">Next</span>
        {% endif %}
    </div>
    {% endif %}
</div>
