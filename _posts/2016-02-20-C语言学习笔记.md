---
layout: post
category: iOS
title: C语言学习笔记
---

学习iOS开发前的C语言基础学习笔记。

<!-- more -->

\#inclue的作用是完全引用文件，相当于复制粘贴。当引用的是系统的文件时使用<>，当引用的是自己写的文件时用""。不能\#inclue c文件，不然链接的时候会报重复定义函数的错误。  

c程序运行过程：编写-->编译（每个c文件编译为相应的obj文件）-->链接（各个obj文件融合再融合c的函数库）-->运行（链接后的文件就是可执行文件了）。  

读取参数函数scanf的用法：

``` c
int i;
scanf("%d", &i); // 这里&符号的意思是取地址
scanf("%d %d", &i); // 支持回车输入多个参数
```

c语言中没有long，short类型，它们和signed以及unsigned一样都是修饰符，通常用来修饰int。long，short指定int有不同的取值范围。unsigned主要指修饰的int是无符号的，意思是只能接受大于等于0的值，如果强行赋负值，可能会内存溢出或者是个奇奇挂怪的值。  

不同编译环境下基本数据类型的存储长度

|               |16位编译器|32位编译器|64位编译器|
|:--------------|:--------|:-------|:--------|
|char           |1        |1       |1        |
|void*（指针变量）|2        |4       |8        |
|short int      |2        |2       |2        |
|unsigned int   |2        |4       |4        |
|int            |2        |4       |4        |
|float          |4        |4       |4        |
|double         |8        |8       |8        |
|long           |4        |4       |8        |
|unsigned long  |4        |4       |8        |
|long long      |8        |8       |8        |

c语言中一维数组的写法如下，注意和java的写法不一样。

``` c
int[] a; // 错误
int[5] a; // 错误
int a[5]; // 正确
```

数组在内侧中是连续的内存地址，数组名代表着整个数组的地址，也就是数组的起始地址。String s = "zlx";用char存储，实际上包括了'z'，'l'，'x'，'\0'四个char，最后一个字符表示字符串结束。

以下是指针的简单例子：

``` c
char a;
char *b; // 定义一个指针变量，且只能指向char类型
b = &a; // 让指针变量b指向a
*b = 10; // 这里的*b代表：访问b中存储的地址对应的存储空间
```

``` c
char a[] = "zlx"; // 定义了一个字符串变量
char *b = "zlx"; // 定义了一个字符串常量
```

函数名就代表内存地址，所以指针也是可以指向函数的。
``` c
int sum(int a, int b) {
    return 0;
}

int main() {
    // 定义了一个指向函数的指针变量p
    // 被p指向的函数返回值为int
    int (*P)(int a, int b);
    p = sum;
    (*p)(5, 6) // 调用函数
    p(5, 6) // 这样调用函数也是可以的
}
```

外部函数用extern修饰，但是默认函数都是外部函数，所以可以不加extern。内部函数用static修饰。c语言中允许有同名的内部函数，但是不允许有同名的外部函数。  

如果多个源文件中有同名的全局变量（extern），那么它们指向的是同一个变量。如果多个源文件中有同名的内部变量（static），那么它们互不干扰。

结构体和数组有点类似，但是数组只能存储相同类型的数据，但是结构体能够存储不同类型的数据。结构体和面向对象的类不同，结构体没有方法，只有属性。结构体也可以包含结构体。

``` c
struct Student {
    int age;
}; // 注意这里一定要加分号，这里只是定义了一个结构体，还没有创建内存

struct Student stu = {20};

// 也可以这么创建
struct Student {
    int age;
} stu = {20};

// 也可以这么创建
struct {
    int age;
} stu = {20};

// 结构体数组
struct {
    int age;
} stu[2] = { {20}, {25} };
```

c语言中，枚举在实际编译的时候，其实是使用整型进行代替的。

typedef给类型起别名，也可以给别名再起别名。typedef还可以给指针和结构体起别名。


